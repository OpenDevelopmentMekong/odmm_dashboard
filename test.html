<!DOCTYPE html>
<html>
  <head>
    <script src="https://d3js.org/d3.v5.min.js"></script>
    <script src="radar.js"></script>
    <style>
      .chart rect {
        fill: steelblue;
      }

      .chart text {
        fill: white;
        text-anchor: middle;
        font: 10px sans-serif;
      }
    </style>

  </head>

  <body>

    <svg class="chart">
    </svg>

    <script>
      var pci = `province,rank,score,sub1,sub2,sub3,sub4,sub5,sub6,sub7,sub8,sub9,sub10,
An Giang,32,62.16,8.67,6.37,6.92,6.88,5.20,4.99,6.44,5.99,5.69,6.15,
BRVT,16,64.43,8.19,5.94,6.36,6.42,5.04,4.33,5.45,7.08,7.29,5.55,
Bac Giang,30,62.20,7.82,6.54,6.73,5.70,5.51,4.72,6.05,6.06,6.32,6.10,
Bac Kan,59,58.82,6.25,5.13,6.65,4.83,4.28,6.42,4.15,6.32,6.09,6.06,
Bac Lieu,42,61.09,8.58,6.55,6.47,6.70,6.38,5.93,6.04,5.77,5.25,5.68,
Bac Ninh,17,64.36,7.27,6.57,5.93,6.65,5.90,3.85,5.81,6.86,7.56,5.39,
Ben Tre,5,66.69,7.88,6.96,6.21,7.61,6.39,6.23,7.01,6.87,6.45,6.78,
Binh Dinh,18,64.08,7.75,6.79,6.67,6.48,6.46,5.63,6.30,5.82,6.51,6.31,
Binh Duong,14,64.47,7.66,6.83,6.52,7.45,5.38,5.61,6.04,6.69,6.35,6.39,
Binh Phuoc,62,56.70,7.95,6.39,6.36,5.76,4.95,4.15,5.34,5.51,5.60,4.02,
Binh Thuan,24,63.34,8.19,6.64,6.42,6.22,5.58,6.12,5.34,6.95,6.18,4.82,
Ca Mau,51,59.83,7.97,6.19,5.81,7.01,6.42,6.17,5.21,6.30,5.09,5.45,
Can Tho,10,65.09,7.86,6.66,6.32,6.78,6.17,5.14,6.11,6.84,6.54,6.51,
Cao Bang,58,58.89,7.28,4.35,5.72,5.03,4.10,4.49,3.63,7.18,6.89,5.61,
Da Nang,2,70.11,8.55,7.11,6.46,7.76,6.29,4.95,6.65,6.93,8.07,6.74,`;

      var data = d3.csvParse(pci);
      var width = 400, height = 200, i;

      // Build y-axis scale
      var maxScore = 0;
      for (i=0; i<data.length; i++) {
        if (data[i].score > maxScore) {
          maxScore = data[i].score;
        }
      }
      var yScale = d3.scaleLinear()
        .range([0, height])
        .domain([0, maxScore]);
      console.log(yScale(70.11));

      // Build the chart
      var chart = d3.select(".chart")
        .attr("width", width)
        .attr("height", height);

      var barWidth = width / data.length;
      var bars = chart.selectAll("g")
        .data(data)
        .enter()
        .append("g")
        .attr("transform", function (d, i) {
          return "translate("+i*barWidth+",0)";
        } );

      bars.append("rect")
        .attr("y", (d) => height - yScale(d.score))
        .attr("height", (d) => yScale(d.score))
        .attr("width", barWidth - 1);


      </script>
  </body>
</html>
